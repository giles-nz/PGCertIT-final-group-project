<script src="./script/script.js" type:"text/javascript"></script>



<div class="container-create">

    {{! Display a message if one was provided. }}
    {{#if toastMessage}}
    <p>{{toastMessage}}</p>

    {{/if}}

<div class="container-create">

    <h1>Create Your New Account</h1>
    <form action="./newAccount" method="POST">

        <div class="flex-col mb">
            <label for="fname">First name</label>
            <p></p>
            <input type="text" name="fname" id="fname" required>
        </div>

        <br>

        <div class="flex-col mb">
            <label for="lname">Last name</label>
            <p></p>
            <input type="text" name="lname" id="lname" required>
        </div>

        <br>
        
        <div class="flex-col mb">
            <label for="dob">Date of birth</label>
            <p></p>
            <input type="date" name="dob" id="dob" required>
        </div>

        <br>

        <div class="flex-col mb">
            <label for="username">Username</label>
            <p></p>
            <input type="text" name="username" id="username" class="usernamecheck"required>
            <p id="log"></p>
            
        </div>
    
<script>
    const input = document.querySelector(".usernamecheck");
    const log = document.querySelector("#log");

    input.addEventListener("change", async function(){
    let request = await fetch(`http://localhost:3000/getAllUsersDetails`);
    let allDetails = await request.json();
    let count = 0;
    for(let i = 0; i < allDetails.length; i++){
        if(input.value == allDetails[i].username){
            count ++;
        }else{
            count += 0
        }
    }
    if(count > 0){
        log.innerHTML = "This username is already taken!";
    }else{
        log.innerHTML = "This username is available!";
    }
    });
</script>


        <div class="flex-col mb">
            <label for ="password">Password</label>
            <p></p>
        <input id="password" name="password" type="password" pattern="^\S{6,}$" 
        onchange="this.setCustomValidity(this.validity.patternMismatch ? 
        'Must have at least 6 characters' : ''); if(this.checkValidity()) 
        form.password_two.pattern = this.value;" required>
        </div>

        <br>
    

        <div class="flex-col mb">
        <label for="password_two">Confirm Password</label>
        <p></p>
        <input id="password_two" name="password_two" type="password" pattern="^\S{6,}$" 
        onchange="this.setCustomValidity(this.validity.patternMismatch ? 
        'Please enter the same password as above' : '');" required>
        </div>

        <br>

<label id="avatar">Choose your avatar:</label>


<div class= "flex-container">

        <div class="flex-container">
            
            <br></br>
            <input type="radio" name="avatar" class="avatar-img" id="1" value="1">
            <label for="1">
                <img src="./images/avatars/1.png">
            </label>
            <input type="radio" name="avatar" class="avatar-img" id="2" value="2">
            <label for="2">
                <img src="./images/avatars/2.png">
            </label>
            <input type="radio" name="avatar" class="avatar-img" id="3" value="3">
            <label for="3">
                <img src="./images/avatars/3.png">
            </label>
            <input type="radio" name="avatar" class="avatar-img" id="4" value="4">
            <label for="6">
                <img src="./images/avatars/4.png">
            </label>
            <input type="radio" name="avatar" class="avatar-img" id="5" value="5">
            <label for="5">
                <img src="./images/avatars/5.png">
            </label>
            <input type="radio" name="avatar" class="avatar-img" id="6" value="6">
            <label for="6">
                <img src="./images/avatars/6.png">
            </label>
        </div>

        <br>
</div>

        <div class="flex-col mb">
            <label for="bio">Tell us a bit about yourself</label>
            <p></p>
            <input type="text" name="bio" id="bio"required>
        </div>

        <br>

        <div class="flex-row justify-sb align-center">
            <button type="submit">CREATE ACCOUNT</button>
        </div>

    </form>


</div>
<br>
